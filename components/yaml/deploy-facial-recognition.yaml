kind: remote
metadata:
  name: deploy-facial-recognition
  tag: ''
  hash: 1027672cd680ac7090b1f9a9c6546829ecdab2cb
  project: facial-recognition-demo
spec:
  command: ''
  args: []
  image: ''
  entry_points:
    init_functions:
      name: init_functions
      doc: ''
      parameters:
      - name: functions
        type: dict
        default: ''
      - name: project
        default: null
      - name: secrets
        default: null
      outputs:
      - default: ''
      lineno: 29
    kfpipeline:
      name: kfpipeline
      doc: ''
      parameters: []
      outputs:
      - default: ''
      lineno: 33
  description: ''
  min_replicas: 1
  max_replicas: 1
  env:
  - name: V3IO_API
    value: ''
  - name: V3IO_USERNAME
    value: ''
  - name: V3IO_ACCESS_KEY
    value: ''
  - name: IGZ_CONTAINER
    value: bigdata
  - name: ROTATE_180
    value: 'True'
  config:
    spec.triggers.http:
      kind: http
      maxWorkers: 1
      attributes:
        ingresses: {}
      annotations: {}
    spec.triggers.image-proc:
      kind: v3ioStream
      url: http://v3io-webapi:8081/bigdata/facial-recognition-demo/videostream@processorgrp
      password: 20a362b3-84cf-4222-9d8e-a06a5a5cb518
      attributes:
        pollingIntervalMs: 500
        seekTo: earliest
        readBatchSize: 100
        partitions: 0-100
  base_spec:
    apiVersion: nuclio.io/v1
    kind: Function
    metadata:
      annotations:
        nuclio.io/generated_by: function generated from 27-10-2020 by nicks
      labels: {}
      name: deploy-facial-recognition
    spec:
      build:
        commands: []
        functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmZyb20gb3MgaW1wb3J0IHBhdGgsIGdldGVudgppbXBvcnQgbnVjbGlvCmZyb20gbWxydW4gaW1wb3J0IG5ld19wcm9qZWN0LCBydW5fbG9jYWwsIE5ld1Rhc2ssIG1sY29uZiwgaW1wb3J0X2Z1bmN0aW9uLCBtb3VudF92M2lvCgpwcm9qZWN0X25hbWUgPSBvcy5nZXRlbnYoIlBST0pFQ1QiKQpwcm9qZWN0X3BhdGggPSBwYXRoLmFic3BhdGgoJ3Byb2plY3QnKQpwcm9qZWN0ID0gbmV3X3Byb2plY3QobmFtZT1wcm9qZWN0X25hbWUsIGNvbnRleHQ9cHJvamVjdF9wYXRoKQphcnRpZmFjdF9wYXRoID0gcGF0aC5hYnNwYXRoKCdhcnRpZmFjdHMnKQptbGNvbmYuZGJwYXRoID0gbWxjb25mLmRicGF0aCBvciAnaHR0cDovL21scnVuLWFwaTo4MDgwJwoKcHJpbnQoZidQcm9qZWN0IHBhdGg6IHtwcm9qZWN0X3BhdGh9XG5Qcm9qZWN0IG5hbWU6IHtwcm9qZWN0X25hbWV9JykKcHJpbnQoZidBcnRpZmFjdHMgcGF0aDoge2FydGlmYWN0X3BhdGh9XG5NTFJ1biBEQiBwYXRoOiB7bWxjb25mLmRicGF0aH0nKQoKcHJvamVjdC5zZXRfZnVuY3Rpb24oJy4uL2NvbXBvbmVudHMveWFtbC9jcmVhdGUtc3RyZWFtcy10YWJsZXMueWFtbCcsICdjcmVhdGUtc3RyZWFtcy10YWJsZXMnKQpwcm9qZWN0LnNldF9mdW5jdGlvbignLi4vY29tcG9uZW50cy95YW1sL2RlcGxveS1mYWNpYWwtcmVjb2duaXRpb24ueWFtbCcsICdkZXBsb3ktZmFjaWFsLXJlY29nbml0aW9uJykKCnByb2plY3QuZnVuY3Rpb25zCgoKaW1wb3J0IG9zCmZyb20ga2ZwIGltcG9ydCBkc2wKZnJvbSBtbHJ1biBpbXBvcnQgbW91bnRfdjNpbwoKZnVuY3MgPSB7fQoKZGVmIGluaXRfZnVuY3Rpb25zKGZ1bmN0aW9uczogZGljdCwgcHJvamVjdD1Ob25lLCBzZWNyZXRzPU5vbmUpOgogICAgZm9yIGYgaW4gZnVuY3Rpb25zLnZhbHVlcygpOgogICAgICAgIGYuYXBwbHkobW91bnRfdjNpbygpKQoKQGRzbC5waXBlbGluZSgKICAgIG5hbWU9IkZhY2lhbCBSZWNvZ25pdGlvbiBEZW1vIiwKICAgIGRlc2NyaXB0aW9uPSJSZWFsLXRpbWUgZmFjaWFsIHJlY29nbml0aW9uIHVzaW5nIElndWF6aW8gRGF0YSBTY2llbmNlIFBsYXRmb3JtLCBOdWNsaW8sIGFuZCBNTFJ1biIKKQpkZWYga2ZwaXBlbGluZSgpOgogICAgCgogICAgc2V0dXAgPSBmdW5jc1snY3JlYXRlLXN0cmVhbXMtdGFibGVzJ10uYXNfc3RlcChvdXRwdXRzPVsncmF3X3ZpZGVvX3N0cmVhbV91cmwnLCAndGFnZ2VkX3ZpZGVvX3N0cmVhbV91cmwnXSkKICAgIAogICAgZGVwbG95ID0gZnVuY3NbJ2RlcGxveS1mYWNpYWwtcmVjb2duaXRpb24nXS5kZXBsb3lfc3RlcChlbnY9eydUQUdHRURfVklERU9fU1RSRUFNX1VSTCcgOiBzZXR1cC5vdXRwdXRzWyd0YWdnZWRfdmlkZW9fc3RyZWFtX3VybCddfSkKCiAgICAKICAgIAogICAgCiAgICAKICAgIAogICAgCiAgICAKICAgIAogICAgCgpwcm9qZWN0LnNldF93b3JrZmxvdygnbWFpbicsICd3b3JrZmxvdy5weScpCgpwcm9qZWN0LnNhdmUoKQoKcnVuX2lkID0gcHJvamVjdC5ydW4oCiAgICAnbWFpbicsCiAgICBhcmd1bWVudHM9e30sIAogICAgYXJ0aWZhY3RfcGF0aD1wYXRoLmFic3BhdGgocGF0aC5qb2luKCdwaXBlbGluZScsJ3t7d29ya2Zsb3cudWlkfX0nKSksIAogICAgZGlydHk9VHJ1ZSkKCmZyb20gbWxydW4gaW1wb3J0IGdldF9ydW5fZGIKZGIgPSBnZXRfcnVuX2RiKCkuY29ubmVjdCgpCmRiLmxpc3RfcnVucyhwcm9qZWN0PXByb2plY3QubmFtZSwgbGFiZWxzPWYnd29ya2Zsb3c9e3J1bl9pZH0nKS5zaG93KCkKCg==
        noBaseImagesPull: true
        baseImage: docker-registry.default-tenant.app.nicks-dev-cluster.iguazio-cd2.com:80/facial-recognition-demo-image
      env: []
      handler: FacialRecognitionDemo:handler
      runtime: python:3.6
      volumes: []
      loggerSinks:
      - level: info
  source: ''
