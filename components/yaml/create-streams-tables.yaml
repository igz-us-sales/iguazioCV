kind: job
metadata:
  name: create-streams-tables
  tag: ''
  hash: 3244978a8ad778e93306b278e1f6728f30c9be10
  project: facial-recognition-demo
spec:
  command: ''
  args: []
  env:
  - name: RAW_VIDEO_STREAM
    value: videostream
  - name: TAGGED_VIDEO_STREAM
    value: taggedvideos
  - name: IGZ_CONTAINER
    value: bigdata
  - name: CAMERA_LIST_TBL
    value: camera_list
  - name: CAMERA_ID
    value: '0'
  - name: SHARD_ID
    value: '0'
  - name: CAMERA_URL
    value: http://192.168.0.103:8080
  default_handler: handler
  entry_points:
    handler:
      name: handler
      doc: ''
      parameters:
      - name: context
        default: ''
      - name: event
        default: ''
      outputs:
      - default: ''
      lineno: 7
  description: ''
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCB2M2lvX2ZyYW1lcyBhcyB2M2YKZnJvbSB2M2lvIGltcG9ydCBkYXRhcGxhbmUKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIGZyYW1lc19jbGllbnQgPSB2M2YuQ2xpZW50KCJmcmFtZXNkOjgwODEiLCBjb250YWluZXI9ImJpZ2RhdGEiKQogICAgZnJhbWVzX2NsaWVudC5jcmVhdGUoInN0cmVhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZT1vcy5nZXRlbnYoIlJBV19WSURFT19TVFJFQU0iKSwKICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJkcz0xMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICByZXRlbnRpb25faG91cnM9MjQpCiAgICBjb250ZXh0LmxvZ19yZXN1bHQoJ3Jhd192aWRlb19zdHJlYW1fdXJsJywgImh0dHA6Ly92M2lvLXdlYmFwaTo4MDgxLyVzLyVzLyIlIChvcy5nZXRlbnYoJ0lHWl9DT05UQUlORVInKSxvcy5nZXRlbnYoJ1JBV19WSURFT19TVFJFQU0nKSkpCiAgICAgCiAgICBmcmFtZXNfY2xpZW50LmNyZWF0ZSgic3RyZWFtIiwKICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlPW9zLmdldGVudigiVEFHR0VEX1ZJREVPX1NUUkVBTSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmRzPTEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgIHJldGVudGlvbl9ob3Vycz0yNCkKICAgIGNvbnRleHQubG9nX3Jlc3VsdCgndGFnZ2VkX3ZpZGVvX3N0cmVhbV91cmwnLCAiaHR0cDovL3YzaW8td2ViYXBpOjgwODEvJXMvJXMvIiUgKG9zLmdldGVudignSUdaX0NPTlRBSU5FUicpLG9zLmdldGVudignVEFHR0VEX1ZJREVPX1NUUkVBTScpKSkKCiAgICB2M2lvX2NsaWVudCA9IGRhdGFwbGFuZS5DbGllbnQobWF4X2Nvbm5lY3Rpb25zPTEpCiAgICB2M2lvX2NsaWVudC5jcmVhdGVfc2NoZW1hKGNvbnRhaW5lcj1vcy5nZXRlbnYoIklHWl9DT05UQUlORVIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD1vcy5nZXRlbnYoIkNBTUVSQV9MSVNUX1RCTCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9J2NhbWVyYUlEJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzPVsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnbmFtZSc6ICdjYW1lcmFJRCcsICd0eXBlJzogJ3N0cmluZycsICdudWxsYWJsZSc6IEZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnbmFtZSc6ICdzaGFyZCcsICd0eXBlJzogJ2xvbmcnLCAnbnVsbGFibGUnOiBGYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J25hbWUnOiAndXJsJywgJ3R5cGUnOiAnc3RyaW5nJywgJ251bGxhYmxlJzogRmFsc2V9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyduYW1lJzogJ2FjdGl2ZScsICd0eXBlJzogJ2Jvb2xlYW4nLCAnbnVsbGFibGUnOiBGYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J25hbWUnOiAnZmVlZF9tZXRob2QnLCAndHlwZSc6ICdzdHJpbmcnLCAnbnVsbGFibGUnOiBGYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J25hbWUnOiAndXNlcnMnLCAndHlwZSc6ICdzdHJpbmcnLCAnbnVsbGFibGUnOiBUcnVlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnbmFtZSc6ICdwYXNzd29yZCcsICd0eXBlJzogJ3N0cmluZycsICdudWxsYWJsZSc6IFRydWV9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKQogICAgCiAgICB2M2lvX2NsaWVudC5wdXRfaXRlbShjb250YWluZXI9b3MuZ2V0ZW52KCJJR1pfQ09OVEFJTkVSIiksCiAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPW9zLnBhdGguam9pbihvcy5nZXRlbnYoIkNBTUVSQV9MSVNUX1RCTCIpLCBvcy5nZXRlbnYoIkNBTUVSQV9JRCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM9eydjYW1lcmFJRCc6IG9zLmdldGVudigiQ0FNRVJBX0lEIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hhcmQnOiBpbnQob3MuZ2V0ZW52KCJTSEFSRF9JRCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBvcy5nZXRlbnYoIkNBTUVSQV9VUkwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmZWVkX21ldGhvZCc6ICJwdXNoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3RpdmUnOiBUcnVlfSkKCg==
    image: docker-registry.default-tenant.app.nicks-dev-cluster.iguazio-cd2.com:80/facial-recognition-demo-image
    commands: []
    code_origin: https://github.com/nschenone/iguazioCV.git#67c4d1cb9bcabffc70d5040869b9ed90b52d2cfc:create-streams-tables.ipynb
